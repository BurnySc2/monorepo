import{S as oe,i as le,s as ne,e as k,t as $,k as M,c as T,a as S,g as D,d,n as V,b as h,f as B,H as i,J as R,h as F,I as j,j as re,m as ie,o as ce,x as Z,u as x,v as ae,K as G,r as Oe,w as Me,L as me,M as ue,A as pe,N as Ae,l as he,O as je,P as z,Q as _e,C as Ve}from"../chunks/vendor-992f8604.js";function We(n){let e,s,t,o,l,r,_=n[0]+1+"",g,m,y,f,c,u,N;return{c(){e=k("main"),s=k("div"),t=k("button"),o=$("Remove"),l=M(),r=k("div"),g=$(_),m=$(")"),y=M(),f=k("div"),c=$(n[1]),this.h()},l(a){e=T(a,"MAIN",{});var b=S(e);s=T(b,"DIV",{class:!0});var p=S(s);t=T(p,"BUTTON",{class:!0});var v=S(t);o=D(v,"Remove"),v.forEach(d),l=V(p),r=T(p,"DIV",{class:!0});var E=S(r);g=D(E,_),m=D(E,")"),E.forEach(d),y=V(p),f=T(p,"DIV",{class:!0});var w=S(f);c=D(w,n[1]),w.forEach(d),p.forEach(d),b.forEach(d),this.h()},h(){h(t,"class","m1 p1 rounded"),h(r,"class","m1 p1"),h(f,"class","m1 p1"),h(s,"class","flex")},m(a,b){B(a,e,b),i(e,s),i(s,t),i(t,o),i(s,l),i(s,r),i(r,g),i(r,m),i(s,y),i(s,f),i(f,c),u||(N=R(t,"click",n[3]),u=!0)},p(a,[b]){b&1&&_!==(_=a[0]+1+"")&&F(g,_),b&2&&F(c,a[1])},i:j,o:j,d(a){a&&d(e),u=!1,N()}}}function Ye(n,e,s){let{index:t=0}=e,{cardText:o="Some default text"}=e,{removeTodo:l}=e;const r=()=>l(t);return n.$$set=_=>{"index"in _&&s(0,t=_.index),"cardText"in _&&s(1,o=_.cardText),"removeTodo"in _&&s(2,l=_.removeTodo)},[t,o,l,r]}class Ge extends oe{constructor(e){super();le(this,e,Ye,We,ne,{index:0,cardText:1,removeTodo:2})}}function Ce(n,e,s){const t=n.slice();return t[12]=e[s].id,t[13]=e[s].content,t[15]=s,t}function Be(n){let e,s;return{c(){e=k("div"),s=$("Unable to connect to server - running local mode"),this.h()},l(t){e=T(t,"DIV",{class:!0});var o=S(e);s=D(o,"Unable to connect to server - running local mode"),o.forEach(d),this.h()},h(){h(e,"class","bg-red-300 rounded p1")},m(t,o){B(t,e,o),i(e,s)},d(t){t&&d(e)}}}function qe(n){let e,s;return e=new Ge({props:{cardText:n[13],index:n[12],removeTodo:n[6]}}),{c(){re(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,o){ce(e,t,o),s=!0},p(t,o){const l={};o&2&&(l.cardText=t[13]),o&2&&(l.index=t[12]),e.$set(l)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Ke(n){let e,s,t,o,l,r,_,g,m,y,f,c,u,N,a,b,p,v=!n[2]&&Be(),E=n[1],w=[];for(let U=0;U<E.length;U+=1)w[U]=qe(Ce(n,E,U));const q=U=>x(w[U],1,1,()=>{w[U]=null});return{c(){e=k("main"),s=k("div"),t=k("input"),o=M(),l=k("button"),r=$("Submit"),_=M(),g=k("button"),m=$("SubmitBody"),y=M(),f=k("button"),c=$("SubmitModel"),u=M(),v&&v.c(),N=M();for(let U=0;U<w.length;U+=1)w[U].c();this.h()},l(U){e=T(U,"MAIN",{class:!0});var O=S(e);s=T(O,"DIV",{class:!0});var I=S(s);t=T(I,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0}),o=V(I),l=T(I,"BUTTON",{class:!0,id:!0});var C=S(l);r=D(C,"Submit"),C.forEach(d),_=V(I),g=T(I,"BUTTON",{class:!0,id:!0});var L=S(g);m=D(L,"SubmitBody"),L.forEach(d),y=V(I),f=T(I,"BUTTON",{class:!0,id:!0});var A=S(f);c=D(A,"SubmitModel"),A.forEach(d),I.forEach(d),u=V(O),v&&v.l(O),N=V(O);for(let J=0;J<w.length;J+=1)w[J].l(O);O.forEach(d),this.h()},h(){h(t,"id","newTodoInput"),h(t,"class","rounded my2 mx1"),h(t,"type","text"),h(t,"placeholder","My new todo item"),h(l,"class","rounded my2 mx1"),h(l,"id","submit1"),h(g,"class","rounded my2 mx1"),h(g,"id","submit2"),h(f,"class","rounded my2 mx1"),h(f,"id","submit3"),h(s,"class","flex"),h(e,"class","flex flex-column items-center")},m(U,O){B(U,e,O),i(e,s),i(s,t),G(t,n[0]),i(s,o),i(s,l),i(l,r),i(s,_),i(s,g),i(g,m),i(s,y),i(s,f),i(f,c),i(e,u),v&&v.m(e,null),i(e,N);for(let I=0;I<w.length;I+=1)w[I].m(e,null);a=!0,b||(p=[R(t,"input",n[7]),R(l,"click",n[3]),R(g,"click",n[4]),R(f,"click",n[5])],b=!0)},p(U,[O]){if(O&1&&t.value!==U[0]&&G(t,U[0]),U[2]?v&&(v.d(1),v=null):v||(v=Be(),v.c(),v.m(e,N)),O&66){E=U[1];let I;for(I=0;I<E.length;I+=1){const C=Ce(U,E,I);w[I]?(w[I].p(C,O),Z(w[I],1)):(w[I]=qe(C),w[I].c(),Z(w[I],1),w[I].m(e,null))}for(Oe(),I=E.length;I<w.length;I+=1)q(I);Me()}},i(U){if(!a){for(let O=0;O<E.length;O+=1)Z(w[O]);a=!0}},o(U){w=w.filter(Boolean);for(let O=0;O<w.length;O+=1)x(w[O]);a=!1},d(U){U&&d(e),v&&v.d(),me(w,U),b=!1,ue(p)}}}const de="http://localhost:8000";function Qe(n,e,s){var t=this&&this.__awaiter||function(a,b,p,v){function E(w){return w instanceof p?w:new p(function(q){q(w)})}return new(p||(p=Promise))(function(w,q){function U(C){try{I(v.next(C))}catch(L){q(L)}}function O(C){try{I(v.throw(C))}catch(L){q(L)}}function I(C){C.done?w(C.value):E(C.value).then(U,O)}I((v=v.apply(a,b||[])).next())})};let o="",l=[{id:0,content:"some todo text"}],r=!0;pe(()=>t(void 0,void 0,void 0,function*(){yield m()}));const _=()=>{let a=0;l.forEach(b=>{a=Math.max(b.id,a)}),a+=1,s(1,l=[...l,{id:a,content:o}])},g=a=>{let b=l.find(p=>p.id===a);if(b){let p=l.indexOf(b);p>=0&&s(1,l=[...l.slice(void 0,p),...l.slice(p+1)])}},m=()=>t(void 0,void 0,void 0,function*(){s(2,r=!0);try{let a=yield fetch(`${de}/api`);if(a.ok)s(1,l=yield a.json());else throw new Error(a.statusText)}catch{s(2,r=!1)}}),y=()=>t(void 0,void 0,void 0,function*(){try{yield fetch(`${de}/api/${o}`,{method:"POST"})}catch{_()}s(0,o=""),yield m()}),f=()=>t(void 0,void 0,void 0,function*(){try{const a={method:"POST",body:JSON.stringify({new_todo:o})};yield fetch(`${de}/api_body`,a)}catch{_()}s(0,o=""),yield m()}),c=()=>t(void 0,void 0,void 0,function*(){try{const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({todo_description:o})};yield fetch(`${de}/api_model`,a)}catch{_()}s(0,o=""),yield m()}),u=a=>t(void 0,void 0,void 0,function*(){try{yield fetch(`${de}/api/${a}`,{method:"DELETE"})}catch{g(a)}yield m()});function N(){o=this.value,s(0,o)}return[o,l,r,y,f,c,u,N]}class Fe extends oe{constructor(e){super();le(this,e,Qe,Ke,ne,{})}}function ze(n){let e,s,t,o,l,r,_,g,m,y;return{c(){e=k("h1"),s=$("Hello "),t=$(He),o=$("!"),l=M(),r=k("p"),_=$("Visit the "),g=k("a"),m=$("Svelte tutorial"),y=$(" to learn how to build Svelte apps."),this.h()},l(f){e=T(f,"H1",{class:!0});var c=S(e);s=D(c,"Hello "),t=D(c,He),o=D(c,"!"),c.forEach(d),l=V(f),r=T(f,"P",{class:!0});var u=S(r);_=D(u,"Visit the "),g=T(u,"A",{href:!0});var N=S(g);m=D(N,"Svelte tutorial"),N.forEach(d),y=D(u," to learn how to build Svelte apps."),u.forEach(d),this.h()},h(){h(e,"class","text-center my-2"),h(g,"href","https://svelte.dev/tutorial"),h(r,"class","text-center my-2")},m(f,c){B(f,e,c),i(e,s),i(e,t),i(e,o),B(f,l,c),B(f,r,c),i(r,_),i(r,g),i(g,m),i(r,y)},p:j,i:j,o:j,d(f){f&&d(e),f&&d(l),f&&d(r)}}}let He="world";class Xe extends oe{constructor(e){super();le(this,e,null,ze,ne,{})}}function Ze(n){let e,s,t,o,l,r,_,g;return{c(){e=k("h1"),s=$("This is my about page! Here I display features of svelte that I have implemented"),t=M(),o=k("button"),l=$("Click me: "),r=$(n[1]),this.h()},l(m){e=T(m,"H1",{class:!0});var y=S(e);s=D(y,"This is my about page! Here I display features of svelte that I have implemented"),y.forEach(d),t=V(m),o=T(m,"BUTTON",{class:!0});var f=S(o);l=D(f,"Click me: "),r=D(f,n[1]),f.forEach(d),this.h()},h(){h(e,"class","text-center my-2"),h(o,"class","p1 rounded")},m(m,y){B(m,e,y),i(e,s),B(m,t,y),B(m,o,y),i(o,l),i(o,r),_||(g=R(o,"click",n[2]),_=!0)},p(m,[y]){y&2&&F(r,m[1])},i:j,o:j,d(m){m&&d(e),m&&d(t),m&&d(o),_=!1,g()}}}function xe(n,e,s){let{defaultText:t="this text"}=e,o=t;const l=()=>{s(1,o=o===t?"is changing":t)};return n.$$set=r=>{"defaultText"in r&&s(0,t=r.defaultText)},[t,o,l]}class et extends oe{constructor(e){super();le(this,e,xe,Ze,ne,{defaultText:0})}}const ve=(n,e,s)=>{const t=Ae({url:n});{let o;return(async()=>{o=t.subscribe({query:e},{next:s,error:r=>{console.log("Error")},complete:()=>{console.log("Subscription ended?")}})})(),o}};function Re(n,e,s){const t=n.slice();return t[21]=e[s],t}function tt(n){let e,s,t,o,l,r,_,g,m,y,f,c,u,N,a=n[5],b=[];for(let p=0;p<a.length;p+=1)b[p]=Je(Re(n,a,p));return{c(){e=k("div"),s=k("button"),t=$("Leave chatroom"),o=M(),l=k("div");for(let p=0;p<b.length;p+=1)b[p].c();r=M(),_=k("div"),g=k("input"),y=M(),f=k("button"),c=$("Send"),this.h()},l(p){e=T(p,"DIV",{class:!0});var v=S(e);s=T(v,"BUTTON",{});var E=S(s);t=D(E,"Leave chatroom"),E.forEach(d),o=V(v),l=T(v,"DIV",{id:!0,class:!0});var w=S(l);for(let O=0;O<b.length;O+=1)b[O].l(w);w.forEach(d),r=V(v),_=T(v,"DIV",{class:!0});var q=S(_);g=T(q,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0}),y=V(q),f=T(q,"BUTTON",{id:!0,class:!0});var U=S(f);c=D(U,"Send"),U.forEach(d),q.forEach(d),v.forEach(d),this.h()},h(){h(l,"id","Chat box"),h(l,"class","grid grid-cols-10 overflow-y-auto"),h(g,"id","chatinput"),h(g,"class","col-span-9"),h(g,"type","text"),h(g,"placeholder",m=`Write your message as '${n[0]}'`),h(f,"id","sendmessage"),h(f,"class","col-span-1"),h(_,"class","grid grid-cols-10"),h(e,"class","flex flex-column")},m(p,v){B(p,e,v),i(e,s),i(s,t),i(e,o),i(e,l);for(let E=0;E<b.length;E+=1)b[E].m(l,null);i(e,r),i(e,_),i(_,g),G(g,n[3]),i(_,y),i(_,f),i(f,c),u||(N=[R(s,"click",n[7]),R(g,"keydown",n[8]),R(g,"input",n[12]),R(f,"click",n[9])],u=!0)},p(p,v){if(v&33){a=p[5];let E;for(E=0;E<a.length;E+=1){const w=Re(p,a,E);b[E]?b[E].p(w,v):(b[E]=Je(w),b[E].c(),b[E].m(l,null))}for(;E<b.length;E+=1)b[E].d(1);b.length=a.length}v&1&&m!==(m=`Write your message as '${p[0]}'`)&&h(g,"placeholder",m),v&8&&g.value!==p[3]&&G(g,p[3])},d(p){p&&d(e),me(b,p),u=!1,ue(N)}}}function st(n){let e,s,t,o,l,r,_,g,m,y,f,c;function u(b,p){return b[2]===""?rt:nt}let N=u(n),a=N(n);return{c(){e=k("div"),s=k("div"),t=$("Connect to graphql chat"),o=M(),a.c(),l=M(),r=k("button"),_=$("Connect"),g=M(),m=k("div"),y=$(n[4]),this.h()},l(b){e=T(b,"DIV",{class:!0});var p=S(e);s=T(p,"DIV",{});var v=S(s);t=D(v,"Connect to graphql chat"),v.forEach(d),o=V(p),a.l(p),l=V(p),r=T(p,"BUTTON",{id:!0,class:!0});var E=S(r);_=D(E,"Connect"),E.forEach(d),g=V(p),m=T(p,"DIV",{});var w=S(m);y=D(w,n[4]),w.forEach(d),p.forEach(d),this.h()},h(){h(r,"id","connect"),h(r,"class","rounded p1"),h(e,"class","flex flex-column m2 rounded items-center")},m(b,p){B(b,e,p),i(e,s),i(s,t),i(e,o),a.m(e,null),i(e,l),i(e,r),i(r,_),i(e,g),i(e,m),i(m,y),f||(c=R(r,"click",n[6]),f=!0)},p(b,p){N===(N=u(b))&&a?a.p(b,p):(a.d(1),a=N(b),a&&(a.c(),a.m(e,l))),p&16&&F(y,b[4])},d(b){b&&d(e),a.d(),f=!1,c()}}}function ot(n){let e,s=n[21].author+"",t;return{c(){e=k("div"),t=$(s),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=S(e);t=D(l,s),l.forEach(d),this.h()},h(){h(e,"class","col-span-1")},m(o,l){B(o,e,l),i(e,t)},p(o,l){l&32&&s!==(s=o[21].author+"")&&F(t,s)},d(o){o&&d(e)}}}function lt(n){let e,s;return{c(){e=k("div"),s=$("You"),this.h()},l(t){e=T(t,"DIV",{class:!0});var o=S(e);s=D(o,"You"),o.forEach(d),this.h()},h(){h(e,"class","col-span-1")},m(t,o){B(t,e,o),i(e,s)},p:j,d(t){t&&d(e)}}}function Je(n){let e,s=_e(n[21].timestamp*1e3).format("HH:mm:ss")+"",t,o,l,r,_=n[21].message+"",g;function m(c,u){return c[21].author===c[0]?lt:ot}let y=m(n),f=y(n);return{c(){e=k("div"),t=$(s),o=M(),f.c(),l=M(),r=k("div"),g=$(_),this.h()},l(c){e=T(c,"DIV",{class:!0});var u=S(e);t=D(u,s),u.forEach(d),o=V(c),f.l(c),l=V(c),r=T(c,"DIV",{class:!0});var N=S(r);g=D(N,_),N.forEach(d),this.h()},h(){h(e,"class","col-span-1"),h(r,"class","col-span-8")},m(c,u){B(c,e,u),i(e,t),B(c,o,u),f.m(c,u),B(c,l,u),B(c,r,u),i(r,g)},p(c,u){u&32&&s!==(s=_e(c[21].timestamp*1e3).format("HH:mm:ss")+"")&&F(t,s),y===(y=m(c))&&f?f.p(c,u):(f.d(1),f=y(c),f&&(f.c(),f.m(l.parentNode,l))),u&32&&_!==(_=c[21].message+"")&&F(g,_)},d(c){c&&d(e),c&&d(o),f.d(c),c&&d(l),c&&d(r)}}}function nt(n){let e,s,t;return{c(){e=k("input"),this.h()},l(o){e=T(o,"INPUT",{type:!0,placeholder:!0,class:!0}),this.h()},h(){h(e,"type","text"),h(e,"placeholder","Username"),h(e,"class","rounded"),e.readOnly=!0},m(o,l){B(o,e,l),G(e,n[2]),s||(t=R(e,"input",n[11]),s=!0)},p(o,l){l&4&&e.value!==o[2]&&G(e,o[2])},d(o){o&&d(e),s=!1,t()}}}function rt(n){let e,s,t;return{c(){e=k("input"),this.h()},l(o){e=T(o,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){h(e,"id","username"),h(e,"type","text"),h(e,"placeholder","Username"),h(e,"class","rounded")},m(o,l){B(o,e,l),G(e,n[1]),s||(t=R(e,"input",n[10]),s=!0)},p(o,l){l&2&&e.value!==o[1]&&G(e,o[1])},d(o){o&&d(e),s=!1,t()}}}function it(n){let e;function s(l,r){return l[0]===""?st:tt}let t=s(n),o=t(n);return{c(){o.c(),e=he()},l(l){o.l(l),e=he()},m(l,r){o.m(l,r),B(l,e,r)},p(l,[r]){t===(t=s(l))&&o?o.p(l,r):(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},i:j,o:j,d(l){o.d(l),l&&d(e)}}}const fe="http://localhost:8000/graphql",be="ws://localhost:8000/graphql";function ct(n,e,s){var t=this&&this.__awaiter||function(I,C,L,A){function J(H){return H instanceof L?H:new L(function(W){W(H)})}return new(L||(L=Promise))(function(H,W){function P(K){try{ee(A.next(K))}catch(Y){W(Y)}}function se(K){try{ee(A.throw(K))}catch(Y){W(Y)}}function ee(K){K.done?H(K.value):J(K.value).then(P,se)}ee((A=A.apply(I,C||[])).next())})};let o="",l="",r="",_="",g="",m=[],y=[{timestamp:123,author:"yolo",message:"example message"}],f,c,u;je(()=>t(void 0,void 0,void 0,function*(){a()}));const N=()=>t(void 0,void 0,void 0,function*(){const I=z.gql`
            mutation {
                chatJoinRoom(username: "${l}")
            }
        `;if((yield z.request(fe,I)).chatJoinRoom)s(0,o=l),s(4,g="");else{s(4,g=`Username ${l} is already taken!`);return}const L=z.gql`
            {
                chatUsers
            }
        `;m=(yield z.request(fe,L)).chatUsers;const J=z.gql`
            {
                chatMessages {
                    timestamp
                    author
                    message
                }
            }
        `,H=yield z.request(fe,J);s(5,y=H.chatMessages),f=ve(be,z.gql`
                subscription {
                    chatUserJoined {
                        data
                    }
                }
            `,b),c=ve(be,z.gql`
                subscription {
                    chatUserLeft {
                        data
                    }
                }
            `,p),u=ve(be,z.gql`
                subscription {
                    chatNewMessage {
                        timestamp
                        author
                        message
                    }
                }
            `,v)}),a=()=>t(void 0,void 0,void 0,function*(){f(),c(),u();const I=z.gql`
        mutation {
            chatLeaveRoom (username: "${o}")
        }
        `;yield z.request(fe,I),s(0,o="")}),b=I=>{console.log(I);const C=I.data.chatUserJoined;m=[...m,C]},p=I=>{console.log(I);const C=I.data.chatUserLeft;m=m.filter(L=>L!==C)},v=I=>{console.log(I);const C=I.data.chatNewMessage;s(5,y=[...y,C])},E=I=>t(void 0,void 0,void 0,function*(){I.key==="Enter"&&(yield w())}),w=()=>t(void 0,void 0,void 0,function*(){const I=z.gql`
            mutation {
                chatSendMessage (username: "${o}", message: "${_}")
            }
        `;s(3,_=""),yield z.request(fe,I)});function q(){l=this.value,s(1,l)}function U(){r=this.value,s(2,r)}function O(){_=this.value,s(3,_)}return[o,l,r,_,g,y,N,a,E,w,q,U,O]}class at extends oe{constructor(e){super();le(this,e,ct,it,ne,{})}}function Pe(n,e,s){const t=n.slice();return t[15]=e[s],t}function ut(n){let e,s,t,o,l,r,_,g,m,y,f=n[5],c=[];for(let u=0;u<f.length;u+=1)c[u]=Le(Pe(n,f,u));return{c(){e=k("div"),s=k("div");for(let u=0;u<c.length;u+=1)c[u].c();t=M(),o=k("div"),l=k("input"),r=M(),_=k("button"),g=$("Send"),this.h()},l(u){e=T(u,"DIV",{class:!0});var N=S(e);s=T(N,"DIV",{id:!0,class:!0});var a=S(s);for(let v=0;v<c.length;v+=1)c[v].l(a);a.forEach(d),t=V(N),o=T(N,"DIV",{class:!0});var b=S(o);l=T(b,"INPUT",{id:!0,class:!0,type:!0}),r=V(b),_=T(b,"BUTTON",{id:!0,class:!0});var p=S(_);g=D(p,"Send"),p.forEach(d),b.forEach(d),N.forEach(d),this.h()},h(){h(s,"id","Chat box"),h(s,"class","grid grid-cols-10 overflow-y-auto"),h(l,"id","chatinput"),h(l,"class","col-span-9"),h(l,"type","text"),h(_,"id","sendmessage"),h(_,"class","col-span-1"),h(o,"class","grid grid-cols-10"),h(e,"class","flex flex-column")},m(u,N){B(u,e,N),i(e,s);for(let a=0;a<c.length;a+=1)c[a].m(s,null);i(e,t),i(e,o),i(o,l),G(l,n[3]),i(o,r),i(o,_),i(_,g),m||(y=[R(l,"keydown",n[7]),R(l,"input",n[11]),R(_,"click",n[8])],m=!0)},p(u,N){if(N&33){f=u[5];let a;for(a=0;a<f.length;a+=1){const b=Pe(u,f,a);c[a]?c[a].p(b,N):(c[a]=Le(b),c[a].c(),c[a].m(s,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=f.length}N&8&&l.value!==u[3]&&G(l,u[3])},d(u){u&&d(e),me(c,u),m=!1,ue(y)}}}function dt(n){let e,s,t,o,l,r,_,g,m,y,f,c;function u(b,p){return b[2]===""?mt:_t}let N=u(n),a=N(n);return{c(){e=k("div"),s=k("div"),t=$("Connect to chat"),o=M(),a.c(),l=M(),r=k("button"),_=$("Connect"),g=M(),m=k("div"),y=$(n[4]),this.h()},l(b){e=T(b,"DIV",{class:!0});var p=S(e);s=T(p,"DIV",{});var v=S(s);t=D(v,"Connect to chat"),v.forEach(d),o=V(p),a.l(p),l=V(p),r=T(p,"BUTTON",{id:!0,class:!0});var E=S(r);_=D(E,"Connect"),E.forEach(d),g=V(p),m=T(p,"DIV",{});var w=S(m);y=D(w,n[4]),w.forEach(d),p.forEach(d),this.h()},h(){h(r,"id","connect"),h(r,"class","rounded p1"),h(e,"class","flex flex-column m2 rounded items-center")},m(b,p){B(b,e,p),i(e,s),i(s,t),i(e,o),a.m(e,null),i(e,l),i(e,r),i(r,_),i(e,g),i(e,m),i(m,y),f||(c=R(r,"click",n[6]),f=!0)},p(b,p){N===(N=u(b))&&a?a.p(b,p):(a.d(1),a=N(b),a&&(a.c(),a.m(e,l))),p&16&&F(y,b[4])},d(b){b&&d(e),a.d(),f=!1,c()}}}function ft(n){let e,s=n[15].author+"",t;return{c(){e=k("div"),t=$(s),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=S(e);t=D(l,s),l.forEach(d),this.h()},h(){h(e,"class","col-span-1")},m(o,l){B(o,e,l),i(e,t)},p(o,l){l&32&&s!==(s=o[15].author+"")&&F(t,s)},d(o){o&&d(e)}}}function ht(n){let e,s;return{c(){e=k("div"),s=$("You"),this.h()},l(t){e=T(t,"DIV",{class:!0});var o=S(e);s=D(o,"You"),o.forEach(d),this.h()},h(){h(e,"class","col-span-1")},m(t,o){B(t,e,o),i(e,s)},p:j,d(t){t&&d(e)}}}function Le(n){let e,s=_e(n[15].timestamp*1e3).format("HH:mm:ss")+"",t,o,l,r,_=n[15].message+"",g;function m(c,u){return c[15].author===c[0]?ht:ft}let y=m(n),f=y(n);return{c(){e=k("div"),t=$(s),o=M(),f.c(),l=M(),r=k("div"),g=$(_),this.h()},l(c){e=T(c,"DIV",{class:!0});var u=S(e);t=D(u,s),u.forEach(d),o=V(c),f.l(c),l=V(c),r=T(c,"DIV",{class:!0});var N=S(r);g=D(N,_),N.forEach(d),this.h()},h(){h(e,"class","col-span-1"),h(r,"class","col-span-8")},m(c,u){B(c,e,u),i(e,t),B(c,o,u),f.m(c,u),B(c,l,u),B(c,r,u),i(r,g)},p(c,u){u&32&&s!==(s=_e(c[15].timestamp*1e3).format("HH:mm:ss")+"")&&F(t,s),y===(y=m(c))&&f?f.p(c,u):(f.d(1),f=y(c),f&&(f.c(),f.m(l.parentNode,l))),u&32&&_!==(_=c[15].message+"")&&F(g,_)},d(c){c&&d(e),c&&d(o),f.d(c),c&&d(l),c&&d(r)}}}function _t(n){let e,s,t;return{c(){e=k("input"),this.h()},l(o){e=T(o,"INPUT",{type:!0,placeholder:!0,class:!0}),this.h()},h(){h(e,"type","text"),h(e,"placeholder","Username"),h(e,"class","rounded"),e.readOnly=!0},m(o,l){B(o,e,l),G(e,n[2]),s||(t=R(e,"input",n[10]),s=!0)},p(o,l){l&4&&e.value!==o[2]&&G(e,o[2])},d(o){o&&d(e),s=!1,t()}}}function mt(n){let e,s,t;return{c(){e=k("input"),this.h()},l(o){e=T(o,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){h(e,"id","username"),h(e,"type","text"),h(e,"placeholder","Username"),h(e,"class","rounded")},m(o,l){B(o,e,l),G(e,n[1]),s||(t=R(e,"input",n[9]),s=!0)},p(o,l){l&2&&e.value!==o[1]&&G(e,o[1])},d(o){o&&d(e),s=!1,t()}}}function pt(n){let e;function s(l,r){return l[0]===""?dt:ut}let t=s(n),o=t(n);return{c(){o.c(),e=he()},l(l){o.l(l),e=he()},m(l,r){o.m(l,r),B(l,e,r)},p(l,[r]){t===(t=s(l))&&o?o.p(l,r):(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},i:j,o:j,d(l){o.d(l),l&&d(e)}}}const vt="localhost:8000";function bt(n,e,s){var t=this&&this.__awaiter||function(v,E,w,q){function U(O){return O instanceof w?O:new w(function(I){I(O)})}return new(w||(w=Promise))(function(O,I){function C(J){try{A(q.next(J))}catch(H){I(H)}}function L(J){try{A(q.throw(J))}catch(H){I(H)}}function A(J){J.done?O(J.value):U(J.value).then(C,L)}A((q=q.apply(v,E||[])).next())})};let o="",l="",r="",_="",g="",m=[{timestamp:123,author:"yolo",message:"example message"}],y=null;const f=()=>{y=new WebSocket(`ws://${vt}/chatws`),y.onmessage=v=>{try{const E=JSON.parse(v.data);console.log("Received:"),console.log(JSON.stringify(E)),"message"in E?console.log(`Received: ${E.message}`):"error"in E?E.error==="usernameTaken"&&(s(4,g=`Username '${r}' is already taken!`),s(2,r="")):"newMessage"in E?(console.log(`Received new message: ${JSON.stringify(E.newMessage)}`),s(5,m=[...m,E.newMessage])):"newMessageHistory"in E?(console.log(`Received new message history: ${E.newMessage}`),s(5,m=[...m,...E.newMessageHistory])):"connectUser"in E&&(console.log(`Successfully connected to server with username ${E.connectUser}`),s(4,g=""),s(2,r=""),s(0,o=E.connectUser))}catch{console.log("Received unreadable data!"),console.log(JSON.stringify(v.data))}},y.onclose=()=>{setTimeout(()=>{f()},5*1e3)},y.onopen=()=>{if(y){const v=JSON.stringify({message:"Hello from client!"});y.send(v)}},y.onerror=()=>{y&&y.close()}};pe(()=>t(void 0,void 0,void 0,function*(){f()}));const c=()=>t(void 0,void 0,void 0,function*(){s(4,g=""),y&&y.readyState===1?(console.log(`Trying to connect user ${l}`),r===""&&(s(2,r=l),y.send(JSON.stringify({tryToConnectUser:l})))):s(4,g="WebSocket is not yet ready!")}),u=v=>t(void 0,void 0,void 0,function*(){v.key==="Enter"&&(yield N())}),N=()=>t(void 0,void 0,void 0,function*(){_!==""&&(y&&y.readyState===1?o!==""&&(y.send(JSON.stringify({sendChatMessage:{timestamp:Date.now()/1e3,author:o,message:_}})),s(3,_="")):console.log("Unable to send message - WS not yet ready"))});function a(){l=this.value,s(1,l)}function b(){r=this.value,s(2,r)}function p(){_=this.value,s(3,_)}return[o,l,r,_,g,m,c,u,N,a,b,p]}class gt extends oe{constructor(e){super();le(this,e,bt,pt,ne,{})}}function yt(n){let e,s,t,o,l,r,_,g,m,y,f,c,u,N,a,b,p,v,E,w,q,U,O,I,C,L,A,J,H,W,P,se,ee,K;return{c(){e=k("main"),s=k("div"),t=k("div"),o=$("Local Storage"),l=M(),r=k("div"),_=$(n[0]),g=M(),m=k("button"),y=$("Increase"),f=M(),c=k("button"),u=$("Decrease"),N=M(),a=k("button"),b=$("Reset"),p=M(),v=k("div"),E=k("div"),w=$("Session Storage"),q=M(),U=k("div"),O=$(n[1]),I=M(),C=k("button"),L=$("Increase"),A=M(),J=k("button"),H=$("Decrease"),W=M(),P=k("button"),se=$("Reset"),this.h()},l(Y){e=T(Y,"MAIN",{});var X=S(e);s=T(X,"DIV",{class:!0});var Q=S(s);t=T(Q,"DIV",{class:!0});var ke=S(t);o=D(ke,"Local Storage"),ke.forEach(d),l=V(Q),r=T(Q,"DIV",{class:!0});var Te=S(r);_=D(Te,n[0]),Te.forEach(d),g=V(Q),m=T(Q,"BUTTON",{class:!0});var Ee=S(m);y=D(Ee,"Increase"),Ee.forEach(d),f=V(Q),c=T(Q,"BUTTON",{class:!0});var Ie=S(c);u=D(Ie,"Decrease"),Ie.forEach(d),N=V(Q),a=T(Q,"BUTTON",{class:!0});var Se=S(a);b=D(Se,"Reset"),Se.forEach(d),Q.forEach(d),p=V(X),v=T(X,"DIV",{class:!0});var te=S(v);E=T(te,"DIV",{class:!0});var we=S(E);w=D(we,"Session Storage"),we.forEach(d),q=V(te),U=T(te,"DIV",{class:!0});var Ne=S(U);O=D(Ne,n[1]),Ne.forEach(d),I=V(te),C=T(te,"BUTTON",{class:!0});var Ue=S(C);L=D(Ue,"Increase"),Ue.forEach(d),A=V(te),J=T(te,"BUTTON",{class:!0});var $e=S(J);H=D($e,"Decrease"),$e.forEach(d),W=V(te),P=T(te,"BUTTON",{class:!0});var De=S(P);se=D(De,"Reset"),De.forEach(d),te.forEach(d),X.forEach(d),this.h()},h(){h(t,"class","m1"),h(r,"class","m1"),h(m,"class","m1"),h(c,"class","m1"),h(a,"class","m1"),h(s,"class","flex"),h(E,"class","m1"),h(U,"class","m1"),h(C,"class","m1"),h(J,"class","m1"),h(P,"class","m1"),h(v,"class","flex")},m(Y,X){B(Y,e,X),i(e,s),i(s,t),i(t,o),i(s,l),i(s,r),i(r,_),i(s,g),i(s,m),i(m,y),i(s,f),i(s,c),i(c,u),i(s,N),i(s,a),i(a,b),i(e,p),i(e,v),i(v,E),i(E,w),i(v,q),i(v,U),i(U,O),i(v,I),i(v,C),i(C,L),i(v,A),i(v,J),i(J,H),i(v,W),i(v,P),i(P,se),ee||(K=[R(m,"click",n[4]),R(c,"click",n[5]),R(a,"click",n[6]),R(C,"click",n[7]),R(J,"click",n[8]),R(P,"click",n[9])],ee=!0)},p(Y,[X]){X&1&&F(_,Y[0]),X&2&&F(O,Y[1])},i:j,o:j,d(Y){Y&&d(e),ee=!1,ue(K)}}}const ge="localValue",ye="sessionValue";function kt(n,e,s){let t=Ve(localStorage.getItem(ge)||"0"),o=parseInt(localStorage.getItem(ge))||0,l=Ve(sessionStorage.getItem(ye)||"0"),r=parseInt(sessionStorage.getItem(ye))||0;return t.subscribe(u=>{localStorage.setItem(ge,u.toString()),s(0,o=parseInt(u))}),l.subscribe(u=>{sessionStorage.setItem(ye,u.toString()),s(1,r=parseInt(u))}),[o,r,t,l,()=>{t.update(u=>(parseInt(u)+1).toString())},()=>{t.update(u=>(parseInt(u)-1).toString())},()=>{t.update(u=>"0")},()=>{l.update(u=>(parseInt(u)+1).toString())},()=>{l.update(u=>(parseInt(u)-1).toString())},()=>{l.update(u=>"0")}]}class Tt extends oe{constructor(e){super();le(this,e,kt,yt,ne,{})}}function Et(n){let e,s;return{c(){e=k("div"),s=$("You seem to be lost!")},l(t){e=T(t,"DIV",{});var o=S(e);s=D(o,"You seem to be lost!"),o.forEach(d)},m(t,o){B(t,e,o),i(e,s)},i:j,o:j,d(t){t&&d(e)}}}function It(n){let e,s;return{c(){e=k("div"),s=$("Loading...")},l(t){e=T(t,"DIV",{});var o=S(e);s=D(o,"Loading..."),o.forEach(d)},m(t,o){B(t,e,o),i(e,s)},i:j,o:j,d(t){t&&d(e)}}}function St(n){let e,s;return e=new Tt({}),{c(){re(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,o){ce(e,t,o),s=!0},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function wt(n){let e,s;return e=new Fe({}),{c(){re(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,o){ce(e,t,o),s=!0},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Nt(n){let e,s;return e=new at({}),{c(){re(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,o){ce(e,t,o),s=!0},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Ut(n){let e,s;return e=new gt({}),{c(){re(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,o){ce(e,t,o),s=!0},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function $t(n){let e,s;return e=new et({props:{defaultText:"My other text"}}),{c(){re(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,o){ce(e,t,o),s=!0},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Dt(n){let e,s;return e=new Xe({}),{c(){re(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,o){ce(e,t,o),s=!0},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Ot(n){let e,s,t,o,l,r,_,g,m,y,f,c,u,N,a,b,p,v,E,w,q,U,O,I,C;const L=[Dt,$t,Ut,Nt,wt,St,It,Et],A=[];function J(H,W){return H[0]==="/"?0:H[0]==="/about"?1:H[0]==="/chat"?2:H[0]==="/graphqlchat"?3:H[0]==="/todo"?4:H[0]==="/browserstorage"?5:H[0]===""?6:7}return q=J(n),U=A[q]=L[q](n),{c(){e=k("main"),s=k("div"),t=k("button"),o=$("Home"),l=M(),r=k("button"),_=$("About"),g=M(),m=k("button"),y=$("Chat"),f=M(),c=k("button"),u=$("Graphql Chat"),N=M(),a=k("button"),b=$("Todo"),p=M(),v=k("button"),E=$("BrowserStorage"),w=M(),U.c(),this.h()},l(H){e=T(H,"MAIN",{});var W=S(e);s=T(W,"DIV",{class:!0});var P=S(s);t=T(P,"BUTTON",{class:!0,id:!0});var se=S(t);o=D(se,"Home"),se.forEach(d),l=V(P),r=T(P,"BUTTON",{class:!0,id:!0});var ee=S(r);_=D(ee,"About"),ee.forEach(d),g=V(P),m=T(P,"BUTTON",{class:!0,id:!0});var K=S(m);y=D(K,"Chat"),K.forEach(d),f=V(P),c=T(P,"BUTTON",{class:!0,id:!0});var Y=S(c);u=D(Y,"Graphql Chat"),Y.forEach(d),N=V(P),a=T(P,"BUTTON",{class:!0,id:!0});var X=S(a);b=D(X,"Todo"),X.forEach(d),p=V(P),v=T(P,"BUTTON",{class:!0,id:!0});var Q=S(v);E=D(Q,"BrowserStorage"),Q.forEach(d),P.forEach(d),w=V(W),U.l(W),W.forEach(d),this.h()},h(){h(t,"class","m1 p1 rounded"),h(t,"id","home"),h(r,"class","m1 p1 rounded"),h(r,"id","about"),h(m,"class","m1 p1 rounded"),h(m,"id","chat"),h(c,"class","m1 p1 rounded"),h(c,"id","graphqlchat"),h(a,"class","m1 p1 rounded"),h(a,"id","todo"),h(v,"class","m1 p1 rounded"),h(v,"id","browserstorage"),h(s,"class","my2 flex justify-center")},m(H,W){B(H,e,W),i(e,s),i(s,t),i(t,o),i(s,l),i(s,r),i(r,_),i(s,g),i(s,m),i(m,y),i(s,f),i(s,c),i(c,u),i(s,N),i(s,a),i(a,b),i(s,p),i(s,v),i(v,E),i(e,w),A[q].m(e,null),O=!0,I||(C=[R(t,"click",n[2]),R(r,"click",n[3]),R(m,"click",n[4]),R(c,"click",n[5]),R(a,"click",n[6]),R(v,"click",n[7])],I=!0)},p(H,[W]){let P=q;q=J(H),q!==P&&(Oe(),x(A[P],1,1,()=>{A[P]=null}),Me(),U=A[q],U||(U=A[q]=L[q](H),U.c()),Z(U,1),U.m(e,null))},i(H){O||(Z(U),O=!0)},o(H){x(U),O=!1},d(H){H&&d(e),A[q].d(),I=!1,ue(C)}}}function Mt(n,e,s){const t="/python-template";let o="",l="";pe(()=>{l=location.hash,s(0,o=l.slice(1)),o===""&&r("/")});const r=u=>{o!==u&&(s(0,o=u),l=`#${u}`,window.history.pushState({},"",`${t}/${l}`))};return[o,r,()=>r("/"),()=>r("/about"),()=>r("/chat"),()=>r("/graphqlchat"),()=>r("/todo"),()=>r("/browserstorage")]}class Ct extends oe{constructor(e){super();le(this,e,Mt,Ot,ne,{})}}export{Ct as default};
